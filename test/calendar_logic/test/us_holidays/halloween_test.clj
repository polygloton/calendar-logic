(ns calendar-logic.test.us-holidays.halloween-test
  (:refer-clojure :exclude [==])
  (:use clojure.test
        calendar-logic.test.test-helper
        [clojure.core.logic :exclude [is]])
  (:require [calendar-logic.us-holidays :as hol]
            [clojure.core.logic.fd :as fd]))

(deftest test-halloween
  (eg
   (sort
    (run* [year month day]
          (fd/in year (fd/interval 1971 2020))
          (hol/halloween year month day)))
   => [[1971 10 31] [1972 10 31] [1973 10 31] [1974 10 31] [1975 10 31]
       [1976 10 31] [1977 10 31] [1978 10 31] [1979 10 31] [1980 10 31]
       [1981 10 31] [1982 10 31] [1983 10 31] [1984 10 31] [1985 10 31]
       [1986 10 31] [1987 10 31] [1988 10 31] [1989 10 31] [1990 10 31]
       [1991 10 31] [1992 10 31] [1993 10 31] [1994 10 31] [1995 10 31]
       [1996 10 31] [1997 10 31] [1998 10 31] [1999 10 31] [2000 10 31]
       [2001 10 31] [2002 10 31] [2003 10 31] [2004 10 31] [2005 10 31]
       [2006 10 31] [2007 10 31] [2008 10 31] [2009 10 31] [2010 10 31]
       [2011 10 31] [2012 10 31] [2013 10 31] [2014 10 31] [2015 10 31]
       [2016 10 31] [2017 10 31] [2018 10 31] [2019 10 31] [2020 10 31]])

  (eg
   (run* [year]
         (hol/halloween year 1 1))
   => []))

(deftest test-not-halloween
  (eg
   (sort
    (run* [year month day]
          (== year 2014)
          (== month 10)
          (hol/not-halloween year month day)))
   [[2014 10 1] [2014 10 2] [2014 10 3] [2014 10 4] [2014 10 5] [2014 10 6]
    [2014 10 7] [2014 10 8] [2014 10 9] [2014 10 10] [2014 10 11] [2014 10 12]
    [2014 10 13] [2014 10 14] [2014 10 15] [2014 10 16] [2014 10 17] [2014 10 18]
    [2014 10 19] [2014 10 20] [2014 10 21] [2014 10 22] [2014 10 23] [2014 10 24]
    [2014 10 25] [2014 10 26] [2014 10 27] [2014 10 28] [2014 10 29] [2014 10 30]]))
