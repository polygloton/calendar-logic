(ns calendar-logic.test.us-holidays.new-years-eve-test
  (:refer-clojure :exclude [==])
  (:use clojure.test
        calendar-logic.test.test-helper
        [clojure.core.logic :exclude [is]])
  (:require [calendar-logic.us-holidays :as hol]
            [clojure.core.logic.fd :as fd]))

(deftest test-new-years-eve
  (eg
   (sort
    (run* [year month day]
          (fd/in year (fd/interval 1971 2020))
          (hol/new-years-eve year month day)))
   [[1971 12 31] [1972 12 31] [1973 12 31] [1974 12 31] [1975 12 31] [1976 12 31]
    [1977 12 31] [1978 12 31] [1979 12 31] [1980 12 31] [1981 12 31] [1982 12 31]
    [1983 12 31] [1984 12 31] [1985 12 31] [1986 12 31] [1987 12 31] [1988 12 31]
    [1989 12 31] [1990 12 31] [1991 12 31] [1992 12 31] [1993 12 31] [1994 12 31]
    [1995 12 31] [1996 12 31] [1997 12 31] [1998 12 31] [1999 12 31] [2000 12 31]
    [2001 12 31] [2002 12 31] [2003 12 31] [2004 12 31] [2005 12 31] [2006 12 31]
    [2007 12 31] [2008 12 31] [2009 12 31] [2010 12 31] [2011 12 31] [2012 12 31]
    [2013 12 31] [2014 12 31] [2015 12 31] [2016 12 31] [2017 12 31] [2018 12 31]
    [2019 12 31] [2020 12 31]])

  (eg
   (run* [year]
         (hol/new-years-eve year 12 30))
   []))

(deftest test-not-new-years-eve
  (eg
   (sort
    (run* [year month day]
          (== year 2014)
          (== month 12)
          (hol/not-new-years-eve year month day)))
   [[2014 12 1] [2014 12 2] [2014 12 3] [2014 12 4] [2014 12 5] [2014 12 6]
    [2014 12 7] [2014 12 8] [2014 12 9] [2014 12 10] [2014 12 11] [2014 12 12]
    [2014 12 13] [2014 12 14] [2014 12 15] [2014 12 16] [2014 12 17] [2014 12 18]
    [2014 12 19] [2014 12 20] [2014 12 21] [2014 12 22] [2014 12 23] [2014 12 24]
    [2014 12 25] [2014 12 26] [2014 12 27] [2014 12 28] [2014 12 29] [2014 12 30]]))
